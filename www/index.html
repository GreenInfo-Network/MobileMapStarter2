<!doctype html>
<html>
    <head>
        <title>Mobile Map Starter 2</title>

        <meta charset="utf-8" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0" />

        <!-- cordova placeholder; yeah it doesn't exist -->
        <script src="cordova.js"></script>

        <!-- AngularJS -->
        <script src="node_modules/angular/angular.js"></script>

        <!-- mobile-angular-ui UI library, which alos handles the page-turning state transition -->
        <link rel="stylesheet" href="node_modules/mobile-angular-ui/dist/css/mobile-angular-ui-base.css" />
        <script src="node_modules/mobile-angular-ui/dist/js/mobile-angular-ui.js"></script>
        <script src="node_modules/mobile-angular-ui/dist/js/mobile-angular-ui.gestures.js"></script>

        <!-- Leaflet -->
        <script src="node_modules/leaflet/dist/leaflet-src.js"></script>
        <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />

        <!-- our own awesomesauce -->
        <script src="bundle.js"></script>
        <link rel="stylesheet" type="text/css" href="bundle.css" />
    </head>

    <!-- use the SharedState service to set whichPage, to show show only one page at a time in the div.app-body
         ui-router and the framework's own router, just lazy-load partial views, so they aren't available for DOM stuff such as Leaflet,
         and they forget their state entirely when you navigate away... -->
    <body ng-app="mobileApp" ng-controller="appController" ui-prevent-touchmove-defaults ui-shared-state="whichPage">
        <!-- sidebar -->
        <span ng-include="'html/sidebar.html'"></span>

        <div class="app" ui-swipe-right="Ui.turnOn('uiSidebarLeft')" ui-swipe-left="Ui.turnOff('uiSidebarLeft')">
            <span ng-include="'html/navbar-top.html'"></span>
            <span ng-include="'html/navbar-bottom.html'"></span>

            <div class="app-body">
                <span ui-show="whichPage == 'welcome' || ! whichPage" ng-include="'html/welcome.html'"></span>
                <span ui-show="whichPage == 'about'" ng-include="'html/about.html'"></span>
                <span ui-show="whichPage == 'map'" ng-include="'html/map.html'"></span>
            </div>

        </div><!-- div.app wrapper -->

        <!-- Modals and Overlays will go here -->
        <div ui-yield-to="modals"></div>
    </body>
</html>
